create database - создать бд
dropdatabase - удалить бд

Для создания бд через коммандную строку:

ssh ubuntu@138.2.136.191 - подключение к серверу mysql

sudo -i - становишься рутом

mysql -proot - зайти в mysql, залогиниться.

после создания бд
 show databases;
 use NameDB;

create table; - создать табл
auto_increment - столбец будет заполнятся автоматически на +1 (для id)
primery key (id) - записи в поле повторятся не будут

create table people( id int not null auto_increment, name varchar(30), email varchar(40), bio text, birth date, primary key(id) );

alter table name add имя поля varchar(32); - добавить в уже существующую табл. нужное поле

Хеш пароли обычно имеют 32 символа

поля  null - не сравниваются при вводе запросов. Пустота. Для поиска пустых значений, пример: select * from people where bio is null;
""- это пустая строка, но это значение.

null is null

union - соеденяет уникальные данные двух селектов. Повторяющихся данных в таблице не будет

union all - соеденяет данные двух селектов. При этом повторяющиеся данные в табл могут быть.

alias в where использовать нельзя

Только в блоке order by можно использовать alias столбца

where - накладывает ограничения на отбираемые данные

having - умеет формировать данные только уже с отобранных данных не используется без group by.


полная комманда запроса в бд -  select * from testdb.phone;
Тоесть необходимо ввести название бд после фром, если мы не перешли в нужную нам бд. С активной бд имя в запросе не используется.

Если название колонки имеет два слова записывать необходимо, пример `last name`

in (`mmm`, `dddd`) - используем когда нам необходимо перечислить значения в опреаторе where.

%A% - перед и после буквы любое кол-во символов
А%- после буквы любое кол-во символов
%А - слова которые заканчиваются на А

between - выбрать между. Оперрация включающаа.
select * from orders where shopId between 2 and 4; - покажет 2,3,4

ASC - данные по порядку
DESC - данные от большего к меньшему. используются с опреатором order by.

 


forum-db.informatik.uni-tuebingen.de/c/ss20-asql - вопросы/ответы по sql

alter table name drop column имя поля; - удалить не нужное поле с табл

ДОБАВЛЕНИЕ И УДАЛЕНИЕ ЗАПИСЕЙ В ТАБЛ:

insert into people (name, bio, birth, email) values('Alex', 'Just programer', '2050-04-04', 'testmail.ru');

alter table people change birth birth date not null - изменить значения поля в табл.

insert into people (name, birth) values('Bob', '2070-05-09'); -  добавить значения в табл.

множественное добавление элементов - 

insert into people (name, email, birth)
           values ('Bob', 'tcldchb1.com', '2062-02-06'),
                  ('Max', 'tcldchb3.com', '2060-02-08'),
                  ('Luk', 'tcldchb2.com', '2050-09-09');

обновить занчения в таблице в которой есть опред поле c данными:

update `people` set `name` = 'Ivan' where id = 2;

update `people` set `name` = 'Den', `email` = 'xhhnhxjs.com' where id > 4;


update `people` set `bio` = 'just new text' where name = 'Ivan' and id = 5;


create table test ( id int not null, sometext text, somefield varchar(36), primary key(id) );

delete from test where id = 2; - удалить определенную запись с таблици
delete from test; - удалить все записи
truncate test; - очистить табличку полностью
drop table test; - удалить табличку безвозвратно

Выбор данных из таблиц:

select * from  people; - выбрать все данные с табл.
select name, bio from people;
select id, name from people where id >= 2 and id < 4; - вывод указанных данных в табл.

where - опрератор с помощью которого табл можно проверять на любое условие
<> - не равно
and - оператор (и), который выводит данные с таблици учитывая все прописанные условия
or - оператор ( или), который выводит данные с табл учитывая или одно или второе или третье условие

select distinct name from people; - выбрать данные не повторяющиеся.
limit - устанавливаем лимит на кол-во выведенных записей
select * from current_dept_emp limit 1;

limit 2, 3 - первое значение говорит сколько эл в табл необходимо пропустить. Второе - сколько эл необходимо вывести.
order by - сортировать поыу. Всегда пишется после оператора where, если он есть в условии
order by id desk сортировка данных по айди в порядке убывания
between 5 and 8 - вывести данные между какими-то значениями
in(5,4,2,1) - вывести данные у которых айди именно указанные ранее
like 'Iv%' - выбрать записи у которых имя начинается на Ив, знак % - указывает, что не важно какие далее будут символы. %f% - в слове буква f где-то в середине. %А - ищем слова в которых буква А в конце.

Индексы - дополнительные характеристики к различным полям в табл.

create index Nindex on people(name); - ускоряет поиск в таблице по определенному полю если данных ооооочень много.

create table orders ( id int not null auto_increment, orderNumber int, shopId int, personId int, date_time datetime default current_timestamp, primary key(id), foreign key(shopID) references shop(id), foreign key(personID) references people(id) );
describe table_name - показать структуру табл.

default - значения по умолчанию. Поле автоматически заполняется
curent_timestamp -  по умолчанию будет заполняться время добавления новой записи

Primary key - Each table in the database should have a PK defined.

foreign key - внешний ключ
References tables name(id) - ссылка на данные в таблице

Обьеденение данных табл

insert into `orders` (`orderNumber`, `shopId, `personId`) values (0001, 2, 4), (0002, 4, 1), (0003, 2, 5), (0004, 3, 3), (0005, 1, 2), (0006, 1, 4);

 select orders.orderNumber, people.name, people.email from people inner join orders on people.id = orders.personId order by orders.orderNumber desc;

inner join - внутреннее объедененине табл. 

Вкомманде прописано: с ордерномер, имя и имейл с табл пипл объеденить данные с табл ордер где пипл айди = orders.personId и сортировать по orders.orderNumber по убыванию

select shop.title, people.name, people.email from people inner join order
s on people.id = orders.personId inner join shop on shop.id = orders.shopId order by orders.orderNumber desc;

select people.name, orders.ordernumber from people left join orders on people.id = orders.personId order by people.name desc;

select orders.date_time, people.name from orders right join people on orders.personId = people.id;

ПСЕВДОНИМЫ:

concat - обьеденить данные с разных полей или строк в одну табл

select concat('имя: ', name, '. День Рождения: ', birth) as 'information'
 from people;

 information                                         |
+-----------------------------------------------------+
| имя: Alex. День Рождения: 2050-04-04                |
| имя: Ivan. День Рождения: 2070-05-09                |
| имя: Luk. День Рождения: 2062-02-06                 |
| имя: Max. День Рождения: 2060-02-08                 |
| имя: Den. День Рождения: 2050-09-09         


select p.id, p.name, s.title, s.price from people as p, shop as s; выборка из нескольких таблиц

count - посчитать определенные значения в табл  
avg- выбрать среднее значение в табл
min- минимальное значение в табл
max- максимальное значение в табл
sum - посчитать опред данніе в таблице

select min(price) from shop;
select avg(price) from shop;


select lcase(title) from shop;
+--------------+
| lcase(title) |
+--------------+
| iphone       |
| tv           |
| fs4          |
| mac          | вывести данные в табл в нижнем регистре
| fridge       |
| iphone 7     |


select ucase(title) from shop;
+--------------+
| ucase(title) |
+--------------+
| IPHONE       |
| TV           |
| FS4          |
| MAC          | вывести данные в верхнем регистре
| FRIDGE       |
| IPHONE 7     |





"" - ЗНАЧИТ ЧИСТАЯ СТРОКА. НЕ НУЛЬ.

delete from tablesname where rowname = means; - удаление строки из таблици.
select * from... order by 3 desc - можно указывать просто номер колонки.

select distinct name from people; - выбрать уникальные имена с таблички. Таким образом можно выбирать любые уникальные записи. Главное указывать по каким калонкам нужна уникальность.

Данные в колонки в sql можно умножать, вычитать, суммировать

 select *, orderNumber * personId from orders;
select *, orderNumber - personId from orders;

'1999-02-203' - даты в запросах писать в кавычках


проверка существование данных в табл.

select recname from table where exists (select 1 from table 2 where...)

not exists - проверка на не существующие данные

Селекты можно между собой обьеденять

select * from table1
 union all             Объеденяет вообще все данные табл. Union -                         показывает только унивальные записи
select * from table2


Агрегатные функции

select count(*) from salaries; подсчет кол-ва строк в таблице

select count(distinct имя столбца) from tables name - считает не нулевые значения

сОЕДЕНЕНИЯ В SQL:

- INNER JOIN
- RIGHT JOIN
- LEFT JOIN
- FULL JOIN 
- CROSS JOIN - СОЕДЕНЕНИЕ ВСЕХ СО ВСЕМИ select * from people, shop;


кОММАНДЫ dml (DATA MANIPULATION LANGUAGE):

КОММАНДЫ МАНИПУЛЯЦИИ ДАННЫМИ

_ SELECT
- INSERT
- DELETE
- UPDATE

Transact-SQL - изучить


 create database leagua charset=utf8 collate utf8_general_ci;
 Создание бд которая принимает не только латиницу, а и другие символы.

типы данных:

char(..) - тип данных текстовый, в бд оставляет именно столько места сколько указано в скобках. Иногда это может быть не оптимально. Использовать лучше там где знаем точное кол-во символов.

varchar(..) - бд выделяет столько места сколько нужно для хранения текста.

int - числа от -2,147,483,648 ... 2,147,483,648
unsigned int - отрицательные числа в колонке не сохранятся
big int - оооочень большие числа

bool - принимает тру фолс значения
decimal(10, 4) - для чисел (деньги) xxxxx.yyy
float- числа с плавающей запитой (4байта)
date
time
datetime
timestamp
decimal - ? learn!!!!

primary key - означает уникальность колонки

describe tablename - описывает табл и какие типы данных в ней используются.

phone char(10) null unique -  сохранит лишь уникальные данные в табл
 
country char(3) default 'ru' - в таблице по умолчанию будет заполнятся поле страна, при этом в ручную мы можем заполняя табл написать другую страну, так с любыми данными

alter table player modify positio int; - изменяет записи в табл
update set position = 0 where playerid = 5; обновляет данные

alter table player add position varchar(20); - добавляем данные

alter table name table add foreign key (column name) references name table2 (name column from table 2) - создание внешнего ключа и ссылки на табл
primary key может ссылаться на primary key

foreign key ссылается только на праймери ки. Записи на которые ссылаются удалить не возможно.
show create table nametable; - посмотреть как создавалась табл
 
Можноописывать constraint для primary key

Каскадное удаление лучше не применять. С точки зрения производительности мы с экономим.


комманды selecta:

 - from
 - where
 - group by
 - having
 - order by
 - join
 - subquery and derived table
 - with
 - window function

select count(distinct(last_name)) as unique_cnt, count(*) as total_count from employees;
+------------+-------------+
| unique_cnt | total_count |
+------------+-------------+
|       1637 |      300024 |

Выбираем уникальные значение из таблицы - считаем их, а так же считаем общее кол-во данных столбца фамилия.

select last_name, count(*) as num_emp from employees group by last_name having count(*) > 150;

Для чистоты кода не нужно миксовать фильтры с джойнами
 join ..... on....
 where
таким образом написанный код легче проверять и закомментироватью

-- where .... - закомментированная строчка кода

ИНДЕКСЫ:

-КЛАСТЕРНЫЙ ИНДЕКС -PRIMERY  KEY -по которому данные в табл вставляются.
-Признак создания индекса это уникальность.
-Если нет индекса на foreign key
-до 10-ти индексов в табл, в которую относительно не часто вставляются данные, можно создавать

https://www.sqlshack.com/learn-sql-primary-key/ - articles sql

DDL (DATA DEFINITION LANGUAGE) - запросы sql - create, alter, drop, rename
DML (DATA MANIPULATION LANGUAGE) - select, insert,u pdate.
DCL (DATA CONTROL LANGUAGE) - grant, revoke

STORED PROCEDURE (хранимая процедура):

объект базы данных, представляющий собой набор SQL-инструкций, который компилируется один раз и хранится на сервере.
Хранимые процедуры позволяют повысить производительность, расширяют возможности программирования и поддерживают функции безопасности данных.

пакет кода под именем, которое можно повторно использовать для очень частых или конфиденциальных задач

usually INSERT, UPDATE, DELETE

- обслуживание упрощено
- security

@ - переменная в sql при создании хранимой процедуры

CREATE PROCEDURE uspGETDATE @NumberofDays int
AS
SELECT GETDATA() - @NumberofDays

EXEC uspGETDATE 11

usp- user store procedure - используется в названии при создании хранимых процедур

ТРИГЕРЫ:
delimiter//
create trigger InSumm 
on t1 
after insert, update, delete 
as 
begin 
insert into t2 values (1); 
end//

CREATE TRIGGER insumm BEFORE INSERT ON t1 SET @sum=1;

Создать тригер в таблице 1 после вставки, удаления, обновления в которой в таблицу 2 будет вставляться число 1.ф

DECLARE @ - объявление переменных в sql

delimiter// - Delimiters can be used when you need to define the stored procedures, function as well as to create triggers. The default delimiter is semicolon.